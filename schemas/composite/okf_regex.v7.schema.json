{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://gokapi.dev/schemas/filters/okf_regex.schema.json",
  "$version": "7.0.0",
  "title": "Regex Filter Filter",
  "description": "Configuration for the Okapi Regex Filter Filter",
  "type": "object",
  "x-filter": {
    "id": "okf_regex",
    "class": "net.sf.okapi.filters.regex.RegexFilter",
    "extensions": [],
    "mimeTypes": [
      "text/x-regex"
    ],
    "configurations": [
      {
        "configId": "okf_regex",
        "name": "Regex Default",
        "description": "Default Regex configuration.",
        "mimeType": "text/x-regex",
        "isDefault": true,
        "filterClass": "net.sf.okapi.filters.regex.RegexFilter"
      },
      {
        "configId": "okf_regex-srt",
        "name": "SRT Sub-Titles",
        "description": "Configuration for SRT (Sub-Rip Text) sub-titles files.",
        "mimeType": "text/x-regex",
        "extensions": ".srt;",
        "parametersLocation": "srt.fprm",
        "parametersRaw": "\nuseLD.b=true\nlocalizeOutside.b=true\nstartString=\"\nendString=\"\nextractOuterStrings.b=false\nuseBSlashEscape.b=true\noneLevelGroups.b=false\nregexOptions.i=40\nmimeType=text/plain\nruleCount.i=1\nrule0.ruleName=Rule\nrule0.ruleType.i=1\nrule0.expr=^(\\d\\d:\\d\\d:\\d\\d.*?)\\n(.*?)(\\n\\n+|\\z)\nrule0.groupSource.i=2\nrule0.groupTarget.i=-1\nrule0.groupName.i=-1\nrule0.groupNote.i=1\nrule0.preserveWS.b=true\nrule0.useCodeFinder.b=true\nrule0.sample=1$0a$00:00:20,000 --> 00:00:24,400 X1:100 X2:600 Y1:050 Y2:100$0a$text line 1$0a$line 2$0a$$0a$2$0a$00:00:24,600 --> 00:00:27,800$0a$Text entry 2$0a$\nrule0.codeFinderRules.count.i=1\nrule0.codeFinderRules.rule0=<\\w+.*?>|</\\w+.*?>\nrule0.codeFinderRules.sample=test <b>bold</b>, <a href='link' more=\"&lt;value&gt;\"/> test\nrule0.codeFinderRules.useAllRulesWhenTesting.b=false\n",
        "parameters": {
          "useLD": true,
          "localizeOutside": true,
          "startString": "\"",
          "endString": "\"",
          "extractOuterStrings": false,
          "useBSlashEscape": true,
          "oneLevelGroups": false,
          "regexOptions": 40,
          "mimeType": "text/plain",
          "ruleCount": 1,
          "rule0.ruleName": "Rule",
          "rule0.ruleType": 1,
          "rule0.expr": "^(\\d\\d:\\d\\d:\\d\\d.*?)\\n(.*?)(\\n\\n+|\\z)",
          "rule0.groupSource": 2,
          "rule0.groupTarget": -1,
          "rule0.groupName": -1,
          "rule0.groupNote": 1,
          "rule0.preserveWS": true,
          "rule0.useCodeFinder": true,
          "rule0.sample": "1$0a$00:00:20,000 --> 00:00:24,400 X1:100 X2:600 Y1:050 Y2:100$0a$text line 1$0a$line 2$0a$$0a$2$0a$00:00:24,600 --> 00:00:27,800$0a$Text entry 2$0a$",
          "rule0.codeFinderRules.count": 1,
          "rule0.codeFinderRules.rule0": "<\\w+.*?>|</\\w+.*?>",
          "rule0.codeFinderRules.sample": "test <b>bold</b>, <a href='link' more=\"&lt;value&gt;\"/> test",
          "rule0.codeFinderRules.useAllRulesWhenTesting": false
        },
        "isDefault": false,
        "filterClass": "net.sf.okapi.filters.regex.RegexFilter"
      },
      {
        "configId": "okf_regex-textLine",
        "name": "Text (Line=Paragraph)",
        "description": "Configuration for text files where each line is a text unit",
        "mimeType": "text/x-regex",
        "parametersLocation": "textLine.fprm",
        "parametersRaw": "\nuseLD.b=true\nlocalizeOutside.b=true\nstartString=\"\nendString=\"\nextractOuterStrings.b=false\nuseBSlashEscape.b=true\noneLevelGroups.b=false\nregexOptions.i=8\nmimeType=text/plain\nruleCount.i=1\nrule0.ruleName=Para\nrule0.ruleType.i=1\nrule0.expr=(^(?=.+))(.*?)$\nrule0.groupSource.i=2\nrule0.groupTarget.i=-1\nrule0.groupName.i=-1\nrule0.groupNote.i=-1\nrule0.preserveWS.b=true\nrule0.useCodeFinder.b=false\nrule0.sample=Text 1$0a$Text 2$0a$$0a$Text 3$0a$Text 4\nrule0.codeFinderRules.count.i=0\nrule0.codeFinderRules.sample=\nrule0.codeFinderRules.useAllRulesWhenTesting.b=false\n",
        "parameters": {
          "useLD": true,
          "localizeOutside": true,
          "startString": "\"",
          "endString": "\"",
          "extractOuterStrings": false,
          "useBSlashEscape": true,
          "oneLevelGroups": false,
          "regexOptions": 8,
          "mimeType": "text/plain",
          "ruleCount": 1,
          "rule0.ruleName": "Para",
          "rule0.ruleType": 1,
          "rule0.expr": "(^(?=.+))(.*?)$",
          "rule0.groupSource": 2,
          "rule0.groupTarget": -1,
          "rule0.groupName": -1,
          "rule0.groupNote": -1,
          "rule0.preserveWS": true,
          "rule0.useCodeFinder": false,
          "rule0.sample": "Text 1$0a$Text 2$0a$$0a$Text 3$0a$Text 4",
          "rule0.codeFinderRules.count": 0,
          "rule0.codeFinderRules.sample": "",
          "rule0.codeFinderRules.useAllRulesWhenTesting": false
        },
        "isDefault": false,
        "filterClass": "net.sf.okapi.filters.regex.RegexFilter"
      },
      {
        "configId": "okf_regex-textBlock",
        "name": "Text (Block=Paragraph)",
        "description": "Configuration for text files where text units are separated by 2 or more line-breaks.",
        "mimeType": "text/x-regex",
        "parametersLocation": "textBlock.fprm",
        "parametersRaw": "\nuseLD.b=true\nlocalizeOutside.b=true\nstartString=\"\nendString=\"\nextractOuterStrings.b=false\nuseBSlashEscape.b=true\noneLevelGroups.b=false\nregexOptions.i=40\nmimeType=text/plain\nruleCount.i=1\nrule0.ruleName=Para\nrule0.ruleType.i=1\nrule0.expr=(\\n*)(.*?)(\\n\\n|\\Z)\nrule0.groupSource.i=2\nrule0.groupTarget.i=-1\nrule0.groupName.i=-1\nrule0.groupNote.i=-1\nrule0.preserveWS.b=false\nrule0.useCodeFinder.b=false\nrule0.sample=$0a$text 1$0a$$0a$$0a$text 2$0a$new line.$0a$$0a$text 3\nrule0.codeFinderRules.count.i=0\nrule0.codeFinderRules.sample=\nrule0.codeFinderRules.useAllRulesWhenTesting.b=false\n",
        "parameters": {
          "useLD": true,
          "localizeOutside": true,
          "startString": "\"",
          "endString": "\"",
          "extractOuterStrings": false,
          "useBSlashEscape": true,
          "oneLevelGroups": false,
          "regexOptions": 40,
          "mimeType": "text/plain",
          "ruleCount": 1,
          "rule0.ruleName": "Para",
          "rule0.ruleType": 1,
          "rule0.expr": "(\\n*)(.*?)(\\n\\n|\\Z)",
          "rule0.groupSource": 2,
          "rule0.groupTarget": -1,
          "rule0.groupName": -1,
          "rule0.groupNote": -1,
          "rule0.preserveWS": false,
          "rule0.useCodeFinder": false,
          "rule0.sample": "$0a$text 1$0a$$0a$$0a$text 2$0a$new line.$0a$$0a$text 3",
          "rule0.codeFinderRules.count": 0,
          "rule0.codeFinderRules.sample": "",
          "rule0.codeFinderRules.useAllRulesWhenTesting": false
        },
        "isDefault": false,
        "filterClass": "net.sf.okapi.filters.regex.RegexFilter"
      },
      {
        "configId": "okf_regex-macStrings",
        "name": "Text (Mac Strings)",
        "description": "Configuration for Macintosh .strings files.",
        "mimeType": "text/x-regex",
        "extensions": ".strings;",
        "parametersLocation": "macStrings.fprm",
        "parametersRaw": "#v1\nuseLd.b=true\nlocalizeOutside.b=true\nstartString=\"\nendString=\"\nextractOuterStrings.b=false\nuseBSlashEscape.b=true\nuseDoubleCharEscape.b=false\nremoveBSlashEscape.b=true\noneLevelGroups.b=false\nregexOptions.i=40\nmimeType=text/plain\nruleCount.i=4\nrule0.ruleName=Comments+String\nrule0.ruleType.i=0\nrule0.expr=/\\*(.*?)\\*/\\n\"(.*?)\"\\s*=(.*?(?<!\\\\)(?:\\\\{2})*\");\nrule0.groupSource.i=3\nrule0.groupTarget.i=-1\nrule0.groupName.i=2\nrule0.groupNote.i=1\nrule0.preserveWS.b=true\nrule0.useCodeFinder.b=true\nrule0.sample=/* Menu item to make the current document plain text */$0a$\"Make Plain Text\" = \"Make Plain \\\"Text\";$0a$/* Menu item to make the current document rich text */$0a$\"Make Rich Text\" = \"Make Rich Text\";$0a$\nrule0.codeFinderRules.count.i=3\nrule0.codeFinderRules.rule0=%(([-0+#]?)[-0+#]?)((\\d\\$)?)(([\\d\\*]*)(\\.[\\d\\*]*)?)[dioxXucsfeEgGpn@]\nrule0.codeFinderRules.rule1=(\\\\r\\\\n)|\\\\a|\\\\b|\\\\f|\\\\n|\\\\r|\\\\t|\\\\v\nrule0.codeFinderRules.rule2=\\<(/?)\\w+[^>]*?>\nrule0.codeFinderRules.sample=\nrule0.codeFinderRules.useAllRulesWhenTesting.b=false\nrule1.ruleName=Bracketing Comments\nrule1.ruleType.i=3\nrule1.expr=/\\*(.*?)\\*/\nrule1.groupSource.i=1\nrule1.groupTarget.i=-1\nrule1.groupName.i=-1\nrule1.groupNote.i=-1\nrule1.preserveWS.b=true\nrule1.useCodeFinder.b=false\nrule1.sample=test /* test */\nrule1.codeFinderRules.count.i=0\nrule1.codeFinderRules.sample=\nrule1.codeFinderRules.useAllRulesWhenTesting.b=false\nrule2.ruleName=Line Comments\nrule2.ruleType.i=3\nrule2.expr=//(.*?)\\n\nrule2.groupSource.i=-1\nrule2.groupTarget.i=-1\nrule2.groupName.i=-1\nrule2.groupNote.i=-1\nrule2.preserveWS.b=true\nrule2.useCodeFinder.b=false\nrule2.sample=// test$0a$test // bbb$0a$\nrule2.codeFinderRules.count.i=0\nrule2.codeFinderRules.sample=\nrule2.codeFinderRules.useAllRulesWhenTesting.b=false\nrule3.ruleName=String\nrule3.ruleType.i=0\nrule3.expr=\"(.*?)\"\\s*=(.*?(?<!\\\\)(?:\\\\{2})*\");\nrule3.groupSource.i=2\nrule3.groupTarget.i=-1\nrule3.groupName.i=1\nrule3.groupNote.i=-1\nrule3.preserveWS.b=true\nrule3.useCodeFinder.b=true\nrule3.sample=/* Menu item to make the current document plain text */$0a$\"Make Plain Text\" = \"Make Plain \\\"Text\";$0a$/* Menu item to make the current document rich text */$0a$\"Make Rich Text\" = \"Make Rich Text\";$0a$\nrule3.codeFinderRules.count.i=3\nrule3.codeFinderRules.rule0=%(([-0+#]?)[-0+#]?)((\\d\\$)?)(([\\d\\*]*)(\\.[\\d\\*]*)?)[dioxXucsfeEgGpn@]\nrule3.codeFinderRules.rule1=(\\\\r\\\\n)|\\\\a|\\\\b|\\\\f|\\\\n|\\\\r|\\\\t|\\\\v\nrule3.codeFinderRules.rule2=\\<(/?)\\w+[^>]*?>\nrule3.codeFinderRules.sample=\nrule3.codeFinderRules.useAllRulesWhenTesting.b=false\n",
        "parameters": {
          "useLd": true,
          "localizeOutside": true,
          "startString": "\"",
          "endString": "\"",
          "extractOuterStrings": false,
          "useBSlashEscape": true,
          "useDoubleCharEscape": false,
          "removeBSlashEscape": true,
          "oneLevelGroups": false,
          "regexOptions": 40,
          "mimeType": "text/plain",
          "ruleCount": 4,
          "rule0.ruleName": "Comments+String",
          "rule0.ruleType": 0,
          "rule0.expr": "/\\*(.*?)\\*/\\n\"(.*?)\"\\s*=(.*?(?<!\\\\)(?:\\\\{2})*\");",
          "rule0.groupSource": 3,
          "rule0.groupTarget": -1,
          "rule0.groupName": 2,
          "rule0.groupNote": 1,
          "rule0.preserveWS": true,
          "rule0.useCodeFinder": true,
          "rule0.sample": "/* Menu item to make the current document plain text */$0a$\"Make Plain Text\" = \"Make Plain \\\"Text\";$0a$/* Menu item to make the current document rich text */$0a$\"Make Rich Text\" = \"Make Rich Text\";$0a$",
          "rule0.codeFinderRules.count": 3,
          "rule0.codeFinderRules.rule0": "%(([-0+#]?)[-0+#]?)((\\d\\$)?)(([\\d\\*]*)(\\.[\\d\\*]*)?)[dioxXucsfeEgGpn@]",
          "rule0.codeFinderRules.rule1": "(\\\\r\\\\n)|\\\\a|\\\\b|\\\\f|\\\\n|\\\\r|\\\\t|\\\\v",
          "rule0.codeFinderRules.rule2": "\\<(/?)\\w+[^>]*?>",
          "rule0.codeFinderRules.sample": "",
          "rule0.codeFinderRules.useAllRulesWhenTesting": false,
          "rule1.ruleName": "Bracketing Comments",
          "rule1.ruleType": 3,
          "rule1.expr": "/\\*(.*?)\\*/",
          "rule1.groupSource": 1,
          "rule1.groupTarget": -1,
          "rule1.groupName": -1,
          "rule1.groupNote": -1,
          "rule1.preserveWS": true,
          "rule1.useCodeFinder": false,
          "rule1.sample": "test /* test */",
          "rule1.codeFinderRules.count": 0,
          "rule1.codeFinderRules.sample": "",
          "rule1.codeFinderRules.useAllRulesWhenTesting": false,
          "rule2.ruleName": "Line Comments",
          "rule2.ruleType": 3,
          "rule2.expr": "//(.*?)\\n",
          "rule2.groupSource": -1,
          "rule2.groupTarget": -1,
          "rule2.groupName": -1,
          "rule2.groupNote": -1,
          "rule2.preserveWS": true,
          "rule2.useCodeFinder": false,
          "rule2.sample": "// test$0a$test // bbb$0a$",
          "rule2.codeFinderRules.count": 0,
          "rule2.codeFinderRules.sample": "",
          "rule2.codeFinderRules.useAllRulesWhenTesting": false,
          "rule3.ruleName": "String",
          "rule3.ruleType": 0,
          "rule3.expr": "\"(.*?)\"\\s*=(.*?(?<!\\\\)(?:\\\\{2})*\");",
          "rule3.groupSource": 2,
          "rule3.groupTarget": -1,
          "rule3.groupName": 1,
          "rule3.groupNote": -1,
          "rule3.preserveWS": true,
          "rule3.useCodeFinder": true,
          "rule3.sample": "/* Menu item to make the current document plain text */$0a$\"Make Plain Text\" = \"Make Plain \\\"Text\";$0a$/* Menu item to make the current document rich text */$0a$\"Make Rich Text\" = \"Make Rich Text\";$0a$",
          "rule3.codeFinderRules.count": 3,
          "rule3.codeFinderRules.rule0": "%(([-0+#]?)[-0+#]?)((\\d\\$)?)(([\\d\\*]*)(\\.[\\d\\*]*)?)[dioxXucsfeEgGpn@]",
          "rule3.codeFinderRules.rule1": "(\\\\r\\\\n)|\\\\a|\\\\b|\\\\f|\\\\n|\\\\r|\\\\t|\\\\v",
          "rule3.codeFinderRules.rule2": "\\<(/?)\\w+[^>]*?>",
          "rule3.codeFinderRules.sample": "",
          "rule3.codeFinderRules.useAllRulesWhenTesting": false
        },
        "isDefault": false,
        "filterClass": "net.sf.okapi.filters.regex.RegexFilter"
      }
    ],
    "serializationFormat": "stringParameters"
  },
  "properties": {
    "extractOuterStrings": {
      "type": "boolean",
      "default": false,
      "description": "Extract strings outside the main content structure"
    },
    "startString": {
      "type": "string",
      "default": "\""
    },
    "endString": {
      "type": "string",
      "default": "\""
    },
    "useBSlashEscape": {
      "type": "boolean",
      "default": true
    },
    "useDoubleCharEscape": {
      "type": "boolean",
      "default": false
    },
    "removeBSlashEscape": {
      "type": "boolean",
      "default": false
    },
    "oneLevelGroups": {
      "type": "boolean",
      "default": false
    },
    "useLd": {
      "type": "boolean",
      "default": false
    },
    "localizeOutside": {
      "type": "boolean",
      "default": false
    },
    "regexOptions": {
      "type": "integer",
      "default": 40
    },
    "mimeType": {
      "type": "string",
      "default": "text/plain"
    },
    "simplifierRules": {
      "type": "string",
      "description": "Rules for simplifying inline code representation",
      "x-widget": "simplifierRulesEditor"
    }
  },
  "additionalProperties": false,
  "x-groups": [
    {
      "id": "extraction",
      "label": "Extraction Settings",
      "description": "Control what content is extracted for translation",
      "collapsed": false,
      "fields": [
        "extractAllPairs",
        "extractSource",
        "extractTarget",
        "extractNotes",
        "extractComments",
        "extractMetadata",
        "extractOuterStrings"
      ]
    },
    {
      "id": "general",
      "label": "General Settings",
      "collapsed": true,
      "fields": [
        "startString",
        "endString",
        "oneLevelGroups",
        "useLd",
        "regexOptions",
        "mimeType"
      ]
    },
    {
      "id": "inlineCodes",
      "label": "Inline Code Handling",
      "description": "Configure detection and handling of inline codes (placeholders, tags, etc.)",
      "collapsed": true,
      "fields": [
        "useCodeFinder",
        "codeFinderRules",
        "mergeAdjacentCodes",
        "moveLeadingAndTrailingCodesToSkeleton",
        "simplifierRules"
      ]
    },
    {
      "id": "output",
      "label": "Output Settings",
      "collapsed": true,
      "fields": [
        "useBSlashEscape",
        "useDoubleCharEscape",
        "removeBSlashEscape"
      ]
    },
    {
      "id": "subfilters",
      "label": "Subfilter Configuration",
      "collapsed": true,
      "fields": [
        "subFilter"
      ]
    }
  ],
  "x-schemaVersion": 7,
  "x-baseVersion": 7,
  "x-introducedInOkapi": "1.42.0",
  "x-baseHash": "816f4de057fb",
  "x-compositeHash": "7458aeeb049c"
}
