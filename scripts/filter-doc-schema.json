{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "FilterDocumentation",
  "description": "Structured documentation extracted from Okapi filter wiki pages, keyed to composite schema property names for UI consumption",
  "type": "object",
  "properties": {
    "filterName": {
      "type": "string",
      "description": "Human-readable filter name"
    },
    "overview": {
      "type": "string",
      "description": "2-4 sentence overview of what this filter does, what formats it handles, and its primary use case. Derived from the wiki Overview section."
    },
    "limitations": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Known limitations from the wiki Limitations section. Each item is a concise statement."
    },
    "processingNotes": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Important processing behavior users should know (encoding detection, BOM handling, line-break preservation, memory usage). From the Processing Details section."
    },
    "examples": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "title": { "type": "string", "description": "Short title for this example" },
          "description": { "type": "string", "description": "Explanation of what this example demonstrates" },
          "input": { "type": "string", "description": "Input content or configuration" },
          "output": { "type": "string", "description": "Resulting output or extracted content. Null if not applicable." }
        },
        "required": ["title", "description"]
      },
      "description": "Worked examples from the wiki showing input/output or configuration patterns"
    },
    "parameters": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "description": "Rich description from the wiki. Include behavioral nuances, valid value ranges, and formatting rules. More detailed than the schema description."
          },
          "notes": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Important notes and warnings from the wiki attached to this parameter (e.g., 'Note: directives have precedence over key condition')"
          },
          "dependsOn": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "property": { "type": "string", "description": "The schema property name this depends on" },
                "condition": { "type": "string", "description": "Human-readable condition (e.g., 'must be true', 'must be set to extract')" }
              },
              "required": ["property", "condition"]
            },
            "description": "Dependencies on other parameters (e.g., 'requires useKeyAsName to be true')"
          },
          "introducedIn": {
            "type": "string",
            "description": "Okapi version where this parameter was introduced (e.g., 'M39', '1.48.0')"
          }
        },
        "required": ["description"]
      },
      "description": "Per-parameter documentation keyed by the JSON Schema property name from the composite schema. Only include parameters that exist in the provided schema."
    }
  },
  "required": ["filterName", "overview", "parameters"]
}
